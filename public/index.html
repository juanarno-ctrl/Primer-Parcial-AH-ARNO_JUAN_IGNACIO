<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pok√©mon Gen VI ‚Äì API + Frontend</title>
  <link rel="stylesheet" href="/app.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Pok√©mon Gen VI</div>
    <nav class="actions">
      <button id="btnLogin">Iniciar sesi√≥n</button>
      <button id="btnRegister" class="secondary">Registrarse</button>
      <button id="btnLogout" class="danger" hidden>Cerrar sesi√≥n</button>
    </nav>
  </header>

  <main class="container">
    <section class="card">
      <h2>Filtros</h2>
      <form id="filters" class="grid">
        <label>Nombre
          <input type="text" id="fName" placeholder="greninja, chesnaught..." />
        </label>
        <label>Tipo
          <input type="text" id="fType" placeholder="Water, Fairy..." />
        </label>
        <label>Ataque (m√≠n)
          <input type="number" id="fMinAtk" min="0" />
        </label>
        <label>Velocidad (m√°x)
          <input type="number" id="fMaxSpd" min="0" />
        </label>
        <label>P√°gina
          <input type="number" id="fPage" min="1" value="1" />
        </label>
        <label>L√≠mite
          <input type="number" id="fLimit" min="1" max="100" value="10" />
        </label>
        <div class="grid-row">
          <button type="submit">Aplicar</button>
          <button type="reset" id="btnReset" class="secondary">Limpiar</button>
        </div>
      </form>
      <div class="notice">Tip: combin√° filtros, por ejemplo: nombre = <code>greninja</code>, tipo = <code>Water</code>, Atk ‚â• <code>90</code>.</div>
    </section>

    <section class="card">
      <div class="list-header">
        <h2>Pok√©mon (Gen VI)</h2>
        <button id="btnNew" class="primary" hidden>+ Nuevo Pok√©mon</button>
      </div>
      <div id="results"></div>
      <div id="pager" class="pager"></div>
    </section>

    <section id="typesCard" class="card">
      <h2>Tipos (b√∫squeda)</h2>
      <form id="typesSearch" class="row">
        <input type="text" id="typeQuery" placeholder="fi (Fire, Fighting...)" />
        <button>Buscar tipos</button>
      </form>
      <div id="typesList"></div>
    </section>

    <!-- üî• NUEVO: Comandos para Postman / cURL -->
    <section class="card">
      <h2>Comandos para Postman / cURL</h2>
      <p>Base URL: <code>http://localhost:3000/api</code></p>
      <div class="notice">Para <strong>POST / PATCH / DELETE</strong> necesit√°s token JWT: Header <code>Authorization: Bearer &lt;TU_TOKEN&gt;</code>. Obtenelo con <code>/auth/login</code>.</div>

      <details open>
        <summary><strong>Auth</strong> ‚Äì Register &amp; Login</summary>
        <p><strong>POST</strong> <code>/auth/register</code></p>
<pre><code class="language-json">POST http://localhost:3000/api/auth/register
Content-Type: application/json

{
  "name": "Juani",
  "email": "juani@api.com",
  "password": "123456"
}
</code></pre>

        <p><strong>POST</strong> <code>/auth/login</code></p>
<pre><code class="language-json">POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "juani@api.com",
  "password": "123456"
}
</code></pre>
        <p>Respuesta: <code>{ "token": "&lt;JWT&gt;" }</code></p>
      </details>

      <details>
        <summary><strong>GET</strong> ‚Äì Listado y detalle</summary>
        <p><strong>GET</strong> <code>/pokemon</code></p>
<pre><code>GET http://localhost:3000/api/pokemon</code></pre>

        <p>Con filtros:</p>
<pre><code>GET http://localhost:3000/api/pokemon?type=water&amp;min_attack=90
GET http://localhost:3000/api/pokemon?name=greninja
</code></pre>

        <p><strong>GET</strong> <code>/pokemon/:id</code></p>
<pre><code>GET http://localhost:3000/api/pokemon/&lt;ID&gt;</code></pre>
      </details>

      <details>
        <summary><strong>POST</strong> ‚Äì Crear Pok√©mon (JWT)</summary>
<pre><code class="language-json">POST http://localhost:3000/api/pokemon
Authorization: Bearer &lt;TU_TOKEN&gt;
Content-Type: application/json

{
  "name": "Froakie",
  "nat_dex": 656,
  "generation": 6,
  "stats": {
    "hp": 30,
    "attack": 25,
    "defense": 15,
    "sp_attack": 35,
    "sp_defense": 16,
    "speed": 37
  },
  "types": ["water"]
}
</code></pre>
      </details>

      <details>
        <summary><strong>PATCH</strong> (PUT)</summary>
<pre><code class="language-json">PATCH http://localhost:3000/api/pokemon/&lt;ID&gt;
Authorization: Bearer &lt;TU_TOKEN&gt;
Content-Type: application/json

{
  "name": "Froakie Evolucionado",
  "stats": {
    "hp": 40,
    "attack": 30
  }
}
</code></pre>
      </details>

      <details>
        <summary><strong>DELETE</strong></summary>
<pre><code>DELETE http://localhost:3000/api/pokemon/&lt;ID&gt;
Authorization: Bearer &lt;TU_TOKEN&gt;
</code></pre>
      </details>
    </section>
    <!-- /NUEVO -->
  </main>

  <!-- Di√°logo CRUD -->
  <dialog id="dlgPokemon" class="dialog">
    <form method="dialog" id="frmPokemon" class="form">
      <h3 id="dlgTitle">Nuevo Pok√©mon</h3>
      <input type="hidden" id="pkId" />
      <label>Nombre
        <input type="text" id="pkName" required minlength="2" />
      </label>
      <label>N√∫mero Nacional (nat_dex)
        <input type="number" id="pkDex" required min="1" />
      </label>
      <div class="grid-2">
        <label>HP <input type="number" id="sHp" required min="1" /></label>
        <label>Atk <input type="number" id="sAtk" required min="1" /></label>
        <label>Def <input type="number" id="sDef" required min="1" /></label>
        <label>SpA <input type="number" id="sSpA" required min="1" /></label>
        <label>SpD <input type="number" id="sSpD" required min="1" /></label>
        <label>Spe <input type="number" id="sSpe" required min="1" /></label>
      </div>
      <label>Tipos (separados por coma)
        <input type="text" id="pkTypes" placeholder="Water, Dark" />
      </label>
      <menu class="dialog-actions">
        <button value="cancel" class="secondary" type="button" onclick="document.getElementById('dlgPokemon').close()">Cancelar</button>
        <button id="btnSave" value="default" class="primary">Guardar</button>
      </menu>
    </form>
  </dialog>

  <!-- Di√°logo Login -->
  <dialog id="dlgLogin" class="dialog">
    <form method="dialog" id="frmLogin" class="form">
      <h3>Iniciar sesi√≥n</h3>
      <label>Email <input type="email" id="lgEmail" required /></label>
      <label>Contrase√±a <input type="password" id="lgPass" required minlength="6" /></label>
      <menu class="dialog-actions">
        <button value="cancel" class="secondary" type="button" onclick="document.getElementById('dlgLogin').close()">Cancelar</button>
        <button id="btnDoLogin" value="default" class="primary">Entrar</button>
      </menu>
    </form>
  </dialog>

  <!-- Di√°logo Registro -->
  <dialog id="dlgRegister" class="dialog">
    <form method="dialog" id="frmRegister" class="form">
      <h3>Registrarse</h3>
      <label>Nombre <input type="text" id="rgName" required minlength="2" /></label>
      <label>Email <input type="email" id="rgEmail" required /></label>
      <label>Contrase√±a <input type="password" id="rgPass" required minlength="6" /></label>
      <menu class="dialog-actions">
        <button value="cancel" class="secondary" type="button" onclick="document.getElementById('dlgRegister').close()">Cancelar</button>
        <button id="btnDoRegister" value="default" class="primary">Crear cuenta</button>
      </menu>
    </form>
  </dialog>

  <footer class="footer">
    <strong>Trabajo Pr√°ctico ‚Äì API RESTful</strong>
    <div>Nombre y Apellido:  <em>Juan Ignacio Arno</em></div>
    <div>Materia: <em>Aplicaciones Hibridas</em></div>
    <div>Docente: <em>Jonathan Emanuel Cruz</em></div>
    <div>Comisi√≥n: <em>DWM2BP</em></div>
  </footer>

  <script src="/app.js" type="module"></script>
</body>
</html>
